import{u as b,g as C}from"./q-D5DYOS3k.js";import{b as U}from"./q-D5DYOS3k.js";import{t as g,p as c,n as m,o as f,m as n,q as R,r as w,v as _,w as x,x as E}from"./q-B8PPvEXs.js";import{c as I,m as L,r as $}from"./q-BdRmJiWH.js";import"./q-7J8Whc3t.js";const P=async(r,s)=>{const[v,p,i,u]=b(),{type:a="link",forceReload:l=r===void 0,replaceState:d=!1,scroll:y=!0}=typeof s=="object"?s:{forceReload:s};n.navCount++;const t=i.value.dest,e=r===void 0?t:typeof r=="number"?r:g(r,u.url);if(c.$cbs$&&(l||typeof e=="number"||!m(e,t)||!f(e,t))){const o=n.navCount,S=await Promise.all([...c.$cbs$.values()].map(h=>h(e)));if(o!==n.navCount||S.some(Boolean)){o===n.navCount&&a==="popstate"&&history.pushState(null,"",t);return}}if(typeof e=="number"){history.go(e);return}if(!f(e,t)){location.href=e.href;return}if(!l&&m(e,t)){{a==="link"&&e.href!==location.href&&history.pushState(null,"",e);const o=document.getElementById(R)??document.documentElement;w(a,e,new URL(location.href),o,_()),a==="popstate"&&(window._qCityScrollEnabled=!0)}return}return i.value={type:a,dest:e,forceReload:l,replaceState:d,scroll:y},x(e,C()),E($,L,I,e.pathname),v.value=void 0,u.isNavigating=!0,new Promise(o=>{p.r=o})};export{U as _hW,P as s_Dknts0B5Fb4};
